(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-app-update"],{"7cf2":function(t,e,n){"use strict";var i=n("ff27"),a=n.n(i);a.a},9361:function(t,e,n){"use strict";n.r(e);var i=n("fa42"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},"9dac":function(t,e,n){"use strict";n.r(e);var i=n("b2d1"),a=n("9361");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("7cf2");var o,c=n("f0c5"),d=Object(c["a"])(a["default"],i["b"],i["c"],!1,null,"4de9cd29",null,!1,i["a"],o);e["default"]=d.exports},b2d1:function(t,e,n){"use strict";var i;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"page-height"},[n("v-uni-view",{staticClass:"page-content"},[t.popup_show?n("v-uni-view",{staticClass:"wrap"},[n("v-uni-view",{staticClass:"popup-bg"},[n("v-uni-view",{staticClass:"popup-content",class:{"popup-content-show":t.popup_show}},[n("v-uni-view",{staticClass:"update-wrap"},[n("v-uni-image",{staticClass:"top-img",attrs:{src:"https://s3.bmp.ovh/imgs/2022/05/14/3f41909f70ea55b3.png"}}),n("v-uni-view",{staticClass:"content"},[n("v-uni-text",{staticClass:"title"},[t._v("发现新版本V"+t._s(t.update_info.version))]),n("v-uni-view",{staticClass:"title-sub",domProps:{innerHTML:t._s(t.update_info.note)}}),t.downstatus<1?n("v-uni-button",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onUpdate()}}},[t._v("立即升级")]):n("v-uni-view",{staticClass:"sche-wrap"},[n("v-uni-view",{staticClass:"sche-bg"},[n("v-uni-view",{staticClass:"sche-bg-jindu",style:t.lengthWidth})],1),n("v-uni-text",{staticClass:"down-text"},[t._v("下载进度:"+t._s((t.downSize/1024/1024).toFixed(2))+"M/"+t._s((t.fileSize/1024/1024).toFixed(2))+"M")])],1)],1)],1),t.downstatus<1&&0==t.update_info.force?n("v-uni-image",{staticClass:"close-ioc",attrs:{src:"https://s3.bmp.ovh/imgs/2022/05/14/0dcb3de16f109931.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.closeUpdate()}}}):t._e()],1)],1)],1):t._e()],1)],1)},s=[]},ec48:function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.page-height[data-v-4de9cd29]{height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:rgba(0,0,0,.7)}.popup-bg[data-v-4de9cd29]{display:flex;flex-direction:column;align-items:center;justify-content:center;position:fixed;top:0;left:0;right:0;bottom:0;width:%?750?%}.popup-content[data-v-4de9cd29]{display:flex;flex-direction:column;align-items:center}.popup-content-show[data-v-4de9cd29]{-webkit-animation:mymove-data-v-4de9cd29 .3s;animation:mymove-data-v-4de9cd29 .3s;-webkit-transform:scale(1);transform:scale(1)}@-webkit-keyframes mymove-data-v-4de9cd29{0%{-webkit-transform:scale(0);transform:scale(0)\r\n    /*开始为原始大小*/}100%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes mymove-data-v-4de9cd29{0%{-webkit-transform:scale(0);transform:scale(0)\r\n    /*开始为原始大小*/}100%{-webkit-transform:scale(1);transform:scale(1)}}.update-wrap[data-v-4de9cd29]{width:%?580?%;border-radius:%?18?%;position:relative;display:flex;flex-direction:column;background-color:#fff;padding:%?170?% %?30?% 0}.update-wrap .top-img[data-v-4de9cd29]{position:absolute;left:0;width:100%;height:%?256?%;top:%?-128?%}.update-wrap .content[data-v-4de9cd29]{display:flex;flex-direction:column;align-items:center;padding-bottom:%?40?%}.update-wrap .content .title[data-v-4de9cd29]{font-size:%?32?%;font-weight:700;color:#6526f3}.update-wrap .content .title-sub[data-v-4de9cd29]{text-align:center;font-size:%?24?%;color:#666;padding:%?30?% 0}.update-wrap .content .btn[data-v-4de9cd29]{width:%?460?%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:%?30?%;height:%?80?%;line-height:%?80?%;border-radius:100px;background-color:#6526f3;margin-top:%?20?%}.close-ioc[data-v-4de9cd29]{width:%?70?%;height:%?70?%;margin-top:%?30?%}.sche-wrap[data-v-4de9cd29]{display:flex;flex-direction:column;align-items:center;justify-content:flex-end;padding:%?10?% %?50?% 0}.sche-wrap .sche-wrap-text[data-v-4de9cd29]{font-size:%?24?%;color:#666;margin-bottom:%?20?%}.sche-wrap .sche-bg[data-v-4de9cd29]{position:relative;background-color:#ccc;height:%?30?%;border-radius:100px;width:%?480?%;display:flex;align-items:center}.sche-wrap .sche-bg .sche-bg-jindu[data-v-4de9cd29]{position:absolute;left:0;top:0;height:%?30?%;min-width:%?40?%;border-radius:100px;background:url(https://s3.bmp.ovh/imgs/2022/05/14/9acdcbe11c32d75b.png) #5775e7 100% %?4?% no-repeat;background-size:%?26?% %?26?%}.sche-wrap .down-text[data-v-4de9cd29]{font-size:%?24?%;color:#5674e5;margin-top:%?16?%}',""]),t.exports=e},fa42:function(t,e,n){"use strict";n("ac1f"),n("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={data:function(){return{popup_show:!0,update_info:null,note:[],fileSize:0,downSize:0,downing:!1,downstatus:0,appleId:""}},onLoad:function(t){t.updata_info?(this.update_info=JSON.parse(t.updata_info),this.note=this.update_info.note.split("\n"),this.appleId=this.update_info.appleId):(plus.nativeUI.toast("参数出错"),setTimeout((function(){uni.navigateBack()}),500))},onBackPress:function(t){if("backbutton"==t.from)return!0},computed:{lengthWidth:function(){var t=this.downSize/this.fileSize*100;return t=t?t.toFixed(2):0,{width:t+"%"}},getHeight:function(){var t=0;return this.tabbar&&(t=50),{bottom:t+"px",height:"auto"}}},methods:{onUpdate:function(){var t=this;1==this.update_info.net_check&&0==this.update_info.net_check?uni.getNetworkType({success:function(e){"wifi"==e.networkType?t.startUpdate():uni.showModal({title:"提示",content:"当前网络非WIFI,继续更新可能会产生流量,确认要更新吗？",success:function(e){e.confirm&&t.startUpdate()}})}}):this.startUpdate()},startUpdate:function(){if(this.downing)return!1;if(this.downing=!0,/\.apk$/.test(this.update_info.now_url))this.download_wgt();else if(/\.wgt$/.test(this.update_info.now_url))this.download_wgt();else{if("ios"===uni.getSystemInfoSync().platform)return void(this.appleId?plus.runtime.launchApplication({action:"itms-apps://itunes.apple.com/cn/app/id".concat(this.appleId,"?mt=8")},(function(t){uni.showModal({title:"跳转到appStore失败",content:"请向app反馈，错误信息："+t.message,confirmText:"复制错误信息",success:function(e){e.confirm&&uni.setClipboardData({data:t.message,success:function(){}})}})})):uni.showToast({title:"未配置appleId无法跳转到appStore，请向app反馈",icon:"none",duration:4e3}));plus.runtime.openURL(this.update_info.now_url,(function(){plus.nativeUI.toast("打开错误")}))}},download_wgt:function(){var t=this;plus.nativeUI.showWaiting("下载更新文件...");var e={method:"get"},n=plus.downloader.createDownload(this.update_info.now_url,e);n.addEventListener("statechanged",(function(e,n){if(null===n);else if(200==n)switch(t.downstatus=e.state,e.state){case 3:plus.nativeUI.closeWaiting(),t.downSize=e.downloadedSize,e.totalSize&&(t.fileSize=e.totalSize);break;case 4:t.installWgt(e.filename);break}else plus.nativeUI.closeWaiting(),plus.nativeUI.toast("下载出错"),t.downing=!1,t.downstatus=0})),n.start()},installWgt:function(t){plus.nativeUI.showWaiting("安装更新文件..."),plus.runtime.install(t,{},(function(){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("更新完成,请重启APP！",(function(){plus.runtime.restart()}))}),(function(t){plus.nativeUI.closeWaiting(),plus.nativeUI.alert("安装更新文件失败["+t.code+"]："+t.message)}))},closeUpdate:function(){uni.setStorageSync("update_ignore",this.update_info.version),uni.navigateBack()}}};e.default=i},ff27:function(t,e,n){var i=n("ec48");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5c8b0afa",i,!0,{sourceMap:!1,shadowMode:!1})}}]);